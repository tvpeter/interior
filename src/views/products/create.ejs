<!DOCTYPE html>
<html>

<% include ../partials/adminheader %>    
    
    <section class="register-section">
        <div class="auto-container">
            <div class="row clearfix">
                    <% include ../partials/aside %>
                <div class="column form-column col-lg-9 col-md-9 col-sm-12 col-xs-12">
                
                    <div class="sec-title medium">
                        <h2><%= pageDetails.header %></h2>
                    </div>
                    <% if(pageDetails.error) {%>
                    <%= pageDetails.error %>
                    <%}%>
                    
                    <div class="ask-questions">
                        <div class="form-box default-form">
                            <div class="contact-form default-form">
                                <form method="post" action="/products/create" enctype="multipart/form-data">
                                    <div class="row clearfix">
                                    
                                        <div class="form-group col-md-6 col-sm-6 col-xs-12">
                                            <input type="text" name="name" value="" placeholder="Name" required>
                                        </div>
            
                                        <div class="form-group col-md-6 col-sm-6 col-xs-12">
                                            <input type="number" name="price" value="" placeholder="Price">
                                        </div>
                                        
                                        <div class="form-group col-md-6 col-sm-6 col-xs-12">
                                           <select required name="category1" id="category1">
                                                <option selected value="" disabled>Category 1</option>
                                                <% categories.map(category => { %>
                                                <option value="<%= category.name %>"><%= category.name %></option>
                                              <%  }); %>
                                            </select>
                                        </div>
                                        <div class="form-group col-md-6 col-sm-6 col-xs-12">
                                            <select name="category2" id="category2">
                                                <option selected value="" disabled>Category 2 (optional)</option>
                                                <% categories.map(category => { %>
                                                <option value="<%= category.name %>"><%= category.name %></option>
                                              <%  }); %>
                                            </select>
                                        </div>
                                         <div class="form-group col-md-6 col-sm-6 col-xs-12">
                                            <input type="number" name="qty" placeholder="Stock Quantity" required>
                                        </div>
                                        <div class="form-group col-md-6 col-sm-6 col-xs-12">
                                            <input type="file" name="img">
                                        </div>
                                        
                                        <div class="form-group col-md-12 col-sm-12 col-xs-12">
                                            <textarea name="description" placeholder="Product description"></textarea>
                                        </div>
                                        
                                        <div class="form-group col-md-12 col-sm-12 col-xs-12">
                                            <button type="submit" class="theme-btn btn-style-two">Create</button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script>
    const category1 = document.getElementById('category1');
    const category2 = document.getElementById('category2').getElementsByTagName('option');

    category1.addEventListener('change', event => {
        for(let option of category2){
           if(option.value === event.target.value) option.disabled = true;
        }
    });

    </script>
      
   <% include ../partials/adminfooter %>
